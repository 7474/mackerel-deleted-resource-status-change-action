swagger: '2.0'

info:
  title: mackerel api
  version: "v0"

host: 'mackerel.io'
schemes:
  - 'https'
basePath: '/api/v0'
securityDefinitions:
  Bearer:
    type: apiKey
    name: 'X-Api-Key'
    in: header

produces:
  - 'application/json'
consumes:
  - 'application/json'

paths:
  /services:
    get:
      security:
        - Bearer: []
      responses:
        200:
          description: Services
          schema:
            $ref: '#/definitions/ServiceResponse'
  /services/{serviceName}/roles:
    get:
      security:
        - Bearer: []
      parameters:
        - name: serviceName
          in: path
          required: true
          type: string
      responses:
        200:
          description: Roles
          schema:
            $ref: '#/definitions/RoleResponse'
  /services/{serviceName}/metric-names:
    get:
      security:
        - Bearer: []
      parameters:
        - name: serviceName
          in: path
          required: true
          type: string
      responses:
        200:
          description: Metric Names
          schema:
            $ref: '#/definitions/MetricNamesResponse'


definitions:
  Service:
    type: object
    properties:
      name:
        type: string
      memo:
        type: string
      roles:
        type: array
        items:
          type: string
  ServiceResponse:
    type: object
    properties:
      services:
        type: array
        items:
          $ref: '#/definitions/Service'
  Role:
    type: object
    properties:
      name:
        type: string
      memo:
        type: string
  RoleResponse:
    type: object
    properties:
      services:
        type: array
        items:
          $ref: '#/definitions/Role'
  MetricName:
    type: object
    properties:
      name:
        type: string
      memo:
        type: string
  MetricNamesResponse:
    type: object
    properties:
      services:
        type: array
        items:
          $ref: '#/definitions/MetricName'
